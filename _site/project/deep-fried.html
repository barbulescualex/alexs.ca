<!doctype html>

<html class="no-js" lang="en">

<head>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<!-- Page Info -->
	<link rel="shortcut icon" href="/images/favicon.jpg">
	<title>Deep Fried</title>
	<meta name="description" content="The most popular deep fryer on the App Store!">

	<!-- Twitter Card -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:title" content="Deep Fried">
	<meta name="twitter:description" content="The most popular deep fryer on the App Store!">
	<meta name="twitter:image:src" content="http://localhost:4000/images/DF/dfCard.png">

	<!-- Facebook OpenGraph -->
	<meta property="og:title" content="Deep Fried" />
	<meta property="og:description" content="The most popular deep fryer on the App Store!" />
	<meta property="og:image" content="http://localhost:4000/images/DF/dfCard.png" />

	
	<!-- Font Embed Code -->
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,500" rel="stylesheet">
	

	<!-- Styles -->
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="/css/style.css">
	
	<!-- Icons -->
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/solid.js" integrity="sha384-GXi56ipjsBwAe6v5X4xSrVNXGOmpdJYZEEh/0/GqJ3JTHsfDsF8v0YQvZCJYAiGu" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/brands.js" integrity="sha384-0inRy4HkP0hJ038ZyfQ4vLl+F4POKbqnaUB6ewmU4dWP0ki8Q27A0VFiVRIpscvL" crossorigin="anonymous"></script>
	<script defer src="https://use.fontawesome.com/releases/v5.1.1/js/fontawesome.js" integrity="sha384-NY6PHjYLP2f+gL3uaVfqUZImmw71ArL9+Roi9o+I4+RBqArA2CfW1sJ1wkABFfPe" crossorigin="anonymous"></script>

	
	<!-- Custom Styles -->
	<style></style>
	

	
	<!-- Analytics Code -->
	
	

	
	<!-- Extra Header JS Code -->
	
	
	
</head>


<body class="loading ajax-loading" data-site-url="http://localhost:4000" data-page-url="/project/deep-fried">

	<!-- class="loading ajax-loading" -->
	<header class="header">

	<div class="wrap">

		
		<a href="/" class="header__title">
			Alex Barbulescu
		</a>
		

		<div class="menu">
			<div class="menu__toggle js-menu-toggle">
				<div class="menu__toggle__icon"><span></span></div>
			</div>
			<div class="menu__wrap">
				<ul class="menu__list">
					
					<li class="menu__list__item">
						<a href="/" class="menu__list__item__link">Projects</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/blog/" class="menu__list__item__link">Blog</a>
					</li>
					
					<li class="menu__list__item">
						<a href="/about" class="menu__list__item__link">About</a>
					</li>
					
				</ul>
			</div>
		</div>

	</div>

</header>


	<div class="loader"><img src="https://media.giphy.com/media/7lsw8RenVcjCM/giphy.gif"/></div>
	<!-- <svg width="120" height="30" viewBox="0 0 120 30" xmlns="http://www.w3.org/2000/svg"><circle cx="15" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="60" cy="15" r="9" fill-opacity="0.3"><animate attributeName="r" from="9" to="9" begin="0s" dur="0.8s" values="9;15;9" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="0.5" to="0.5" begin="0s" dur="0.8s" values=".5;1;.5" calcMode="linear" repeatCount="indefinite" /></circle><circle cx="105" cy="15" r="15"><animate attributeName="r" from="15" to="15" begin="0s" dur="0.8s" values="15;9;15" calcMode="linear" repeatCount="indefinite" /><animate attributeName="fill-opacity" from="1" to="1" begin="0s" dur="0.8s" values="1;.5;1" calcMode="linear" repeatCount="indefinite" /></circle></svg> -->

	<div class="page-loader"></div>

	<div class = "content">
		<div class="page">

			<div class="page__content" data-page-title="Deep Fried">
				
				<!-- <section class="intro">

	<div class="wrap">
		
		<p>The most popular deep fryer on the App Store!</p>
		

</section> -->

<section class="single">

	<div class="center">
	<h1><i class="fab fa-apple"></i> Deep Fried</h1>
	<br />

	<img src="/images/DF/DeepFriedAppIcon.png" class="roundedAppIcon" />

	<h2>4.6/5 stars | 4K+ ratings</h2>
	<br />
	<a href="https://itunes.apple.com/us/app/deep-fried/id1436647902?mt=8&amp;uo=4" class="button button--large red">Download</a>
	<a href="https://deepfried.app/" class="button button--large red">Visit Website</a>
	<br />
	<h2>Acquired in June of 2020</h2>
</div>
<div class="gallery" data-columns="5">
	<img src="/images/DF/CameraPreviewX.png" class="roundedImage" />
	<img src="/images/DF/galleryX.png" class="roundedImage" />
	<img src="/images/DF/warpX.png" class="roundedImage" />
	<img src="/images/DF/editX.png" class="roundedImage" />
	<img src="/images/DF/saveX.png" class="roundedImage" />
</div>

<hr />

<h3 id="overview">Overview</h3>

<p>Deep Fried is an image editing and processing application. It served an underrepresented space in “meme maker” type apps which led to its success and popularity. To date it still remains the most popular app in its space.</p>

<p>I was the <strong>sole developer and maintainer</strong> of the application before selling it. At the time of sale, it was pulling in around 2K daily active users.</p>

<hr />

<h3 id="development">Development</h3>

<p>As an image editing and processing application, Deep Fried had a variety of technical obstacles to overcome. Besides developing novel features, minimizing system resource usage was at the forefront of my efforts.</p>

<h4 id="frameworks-used">Frameworks Used:</h4>
<ul>
  <li>Metal</li>
  <li>Core Image</li>
  <li>AVFoundation</li>
  <li>PhotoKit</li>
  <li>Core Data</li>
  <li>Firebase (analytics tools)</li>
</ul>

<p>You can find demonstrations of the skills I had developed in making this application on my <a href="https://medium.com/@barbulescualex">Medium</a> blog in the form of tutorial projects.</p>

<!-- ---

#### Deep Fried Camera: AVFoundation | Core Image | MetalKit

Perhaps this is my most novel feature inside the application. I take buffer data in from the camera, apply the filters on the data and display it back to the screen in real time.

**GPU and CPU**

At first this process was very CPU intensive as I would be creating a CIImage from the buffer data to apply the filters (this takes place on the GPU through the Core Image framework) but then transforming it into a UIImage to display in an UIImageView on screen 30FPS. While this worked just fine the overall resource usage was very high. I then set out to optimize this by removing the need for the CPU to do work by displaying the data from the GPU directly from the screen. This led me into using the MetalKit framework, replacing the UIImageView with a MetalKit view. 

While this significantly cut down on my resource usage, I noticed older devices (pre  A10) could not handle the MetalKit view inside of my application. So for those devices I still use the CPU to display the processed camera feed.

**Initiating & Switching Cameras**

Unsuprisingly these processes can be very slow on the main thread. Moving these to background threads is mandatory (well not really, only if you want to provide a better user experience)

---

#### General Frying:

This is simply an extension of the Deep Fried camera (well this one actually came first). The only difference is instead of creating a CIImage from the buffer data I create it from the UIImage the user took/selected.

---

#### Warp Controller: Core Image

The warp controller allows you to bump, pinch and swirl images based on touch input. You can adjust the radius and intensity of the effect.

**Translating Touches**

This was the most annoying part of this feature by far, mainly because I tried to be lazy instead of actually doing some math. To effectively translate touches on an UIImageView holding an image into tangible coordinates (and radius of effect) for the *actual image* you need to know the pixel density difference of the screen vs image and figure out how it's sitting inside the UIImageView. (It would be nice if the UIImageView could provide this sort of information).

After calculating the density difference, some ratio math can let you know wether all the sides are touching the UIImageView (super rare) or wether the top/bottom or left/right is touching the UIImageView. From there you need to calculate the no touch zones.

After all that you need to remember that the UIImageView's origin point in its coordinate system is top-left while Core Image's origin is in the bottom-left.

---

#### Working With The Album And Collection View: PhotoKit

**Interacting With The User's Camera Roll**

At the root of my application resides the a UICollectionView which holds all the user's images from their album. I use a singleton class (yeah I know, sue me) to interact with the camera roll that instantiates the "Deep Fried Memes" folder if it doesn't exist, loads in thumbnails/full images, saves images, deletes images and fetches all the PHAssets.

**Populating the UICollectionView**

Buggy, slow, high memory usage. All things that can happen if you don't do this correctly. The saving grace is the PHCachingImageManager, this API handles most of the heavy lifting in terms of optimization. 

**Registering to PHPhotoLibraryDidChange**

PhotoKit sends out notifications like a mad man, if you're updating the collection view every time you get this notification you're wasting a lot energy. For this reason I using a flag "needsUpdate" that only gets set to true if the user leaves the application, deletes and image or saves an image.

---

#### Adding Text & Custom Assets To Your Images

Luckily I found an abandoned framework for this one. I updated it from Swift 3, fixed memory leaks and extended its functionality. Using Core Data I let users add in their own custom assets into the Edit controller and implemented fonts. -->


</section>
	
			</div>
	
		</div>

	</div>






	<!-- Javascript Assets -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="/js/board-min.js"></script>

	
	<!-- Extra Footer JS Code -->
	
	

	<footer class="footer">

	<div class="wrap">

		<div class="footer__content">

			<p class="footer__text">Creating experiences. Computer Engineering student at the University of Waterloo.</p>
			<div class="footer__copyright">
				<span>© 2022 Alex Barbulescu</span>
				<br/>
			</div>

			<ul class="socials">
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://medium.com/@barbulescualex" target="_blank" class="socials__item__link" title="Medium">
			<i class="fab fa-medium" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://github.com/barbulescualex" target="_blank" class="socials__item__link" title="Github">
			<i class="fab fa-github" aria-hidden="true"></i>
		</a>
	</li>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	<li class="socials__item">
		<a href="https://www.linkedin.com/in/barbulescualex/" target="_blank" class="socials__item__link" title="Linkedin">
			<i class="fab fa-linkedin" aria-hidden="true"></i>
		</a>
	</li>
	
	
</ul>

		</div>

	</div>

</footer>
</body>

</html>